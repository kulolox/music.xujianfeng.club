(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[5],{200:function(e,t,a){"use strict";var n=a(9),c=a(0),r=a.n(c),i=a(201),o=a.n(i);t.a=function(e){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),i=a[0],l=a[1];return Object(c.useEffect)((function(){var t=new Image;t.src=e.src,t.onload=function(){l(!0)}}),[e.src]),r.a.createElement("img",{src:i?e.src:o.a,style:{width:e.width,height:e.height,border:e.border?"1px solid #f1f1f1":"none"},alt:""})}},201:function(e,t,a){e.exports=a.p+"static/media/default_image.3590e8c0.svg"},202:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(224),i=a(286);t.a=function(e){var t;return c.a.createElement("div",{style:{width:"100%",minHeight:"30vh",display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(r.a,{tip:null!==(t=e.text)&&void 0!==t?t:"",indicator:c.a.createElement(i.a,{style:{fontSize:24}})}))}},209:function(e,t,a){},219:function(e,t,a){e.exports={category:"_3mAHRFcYGDiGQD5NjIXGPy",cat:"_2fL91aoxtpB750p_bV8Grf"}},220:function(e,t,a){e.exports={catList:"mEruZ2ckuwrGDZ2MSXJCo",catItem:"_2O84mjn8D8wOpxfnqEOtXv",catType:"_3oAYWiiJH6phwibICqvAt3",catContent:"gTqd4UnIQvBWXOCowsaEq",tag:"_3DVQ_vSuNEcYjSVWusAXTj"}},223:function(e,t,a){e.exports={home:"_1rW0pNaf1fNsEyxJ1Mfjzu",albumBox:"DSzUk1jApFhiIiiziwiiJ",list:"_1LyBgoCtD8vu00-fH7p4bX",album:"_25TOVTjWvPZEpDlZ4Ctxbi",cover:"_12_QnF4bHP0O3Cx_-GWY_i",playCount:"tcVtdPf6Ib8JCZMb4hjSI",creatorName:"CRwK1pNC0vrWnK4-lgwX5",name:"_2M4N4JW1q7OQBBF9dnfQqx",pagination:"_1QrPHZIz1OLO5wAAzxjVHI"}},283:function(e,t,a){"use strict";a.r(t);var n=a(49),c=a.n(n),r=a(70),i=a(9),o=a(0),l=a.n(o),s=a(86),u=a(280),m=a(277),p=a(218),f=a(69),d=a(25),E=a(200),y=a(125),v=a(194),b=a(219),g=a.n(b),N=(a(209),a(285)),C=a(220),h=a.n(C),_=N.a.CheckableTag,O=function(e){return l.a.createElement("div",{className:h.a.catList},e.catList.map((function(t){return l.a.createElement("div",{key:t.type,className:h.a.catItem},l.a.createElement("div",{className:h.a.catType},t.typeName),l.a.createElement("div",{className:h.a.catContent},t.list.map((function(t){return l.a.createElement(_,{key:t.name,className:h.a.tag,checked:e.selectedCat===t.name,onClick:function(){return e.onSelect(t.name)}},t.name)}))))})))},j=function(e){var t=Object(o.useState)(!1),a=Object(i.a)(t,2),n=a[0],c=a[1],r=Object(o.useState)([]),s=Object(i.a)(r,2),u=s[0],m=s[1];return Object(o.useEffect)((function(){Object(f.d)().then((function(e){var t=e.data,a=t.categories,n=t.sub,c=[];Object.keys(a).forEach((function(e){c.push({type:parseInt(e),typeName:a[e],list:n.filter((function(t){return t.category===parseInt(e)}))})})),m(c)}))}),[]),l.a.createElement("div",{className:g.a.category},l.a.createElement(y.a,{placement:"topLeft",visible:n,content:l.a.createElement(O,{catList:u,selectedCat:e.currentCat,onSelect:function(t){e.catSelect(t),c(!1)}}),trigger:"click"},l.a.createElement(v.a,{onClick:function(){return c(!n)}},"\u9009\u62e9\u98ce\u683c",l.a.createElement(d.a,{type:"icon-up"}))),l.a.createElement("div",{className:g.a.cat},"\u5f53\u524d\u98ce\u683c\uff1a",e.currentCat))},A=a(223),L=a.n(A),S=a(202),I={banners:[],pageNo:1,loading:!1,totalCount:0,cat:"\u534e\u8bed",albumList:[]};function x(e,t){switch(t.type){case"GET_BANNER":return void(e.banners=t.payload);case"GET_ALBUM_LIST":var a=t.payload,n=a.albumList,c=a.totalCount;return e.albumList=n,void(e.totalCount=c);case"CAT_SELECT":return e.pageNo=1,void(e.cat=t.payload);case"PAGE_CHANGE":return void(e.pageNo=t.payload);case"SET_PAGE_LOADING":return void(e.loading=t.payload);default:return}}t.default=function(){var e=Object(p.a)(x,I),t=Object(i.a)(e,2),a=t[0],n=t[1],y=a.banners,v=a.pageNo,b=a.loading,g=a.totalCount,N=a.cat,C=a.albumList;return Object(o.useEffect)((function(){Object(f.c)(0).then((function(e){n({type:"GET_BANNER",payload:e.data.banners.map((function(e){return{scm:e.scm,imageUrl:e.imageUrl}}))})}))}),[n]),Object(o.useEffect)((function(){function e(){return(e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"SET_PAGE_LOADING",payload:!0}),e.next=3,Object(f.b)({cat:N,limit:35,offset:35*(v-1)});case 3:t=e.sent,a=t.data,n({type:"GET_ALBUM_LIST",payload:{albumList:a.playlists.map((function(e){return{id:e.id,coverImgUrl:e.coverImgUrl,playCount:e.playCount,name:e.name,creator:e.creator}})),totalCount:a.total}}),n({type:"SET_PAGE_LOADING",payload:!1});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N,n,v]),l.a.createElement("div",{className:L.a.home},l.a.createElement("div",{className:L.a.banner},l.a.createElement(u.a,{autoplay:!0},y.map((function(e){return l.a.createElement("div",{key:e.scm,className:L.a.item},l.a.createElement("img",{src:e.imageUrl,alt:""}))})))),l.a.createElement("div",{className:L.a.albumBox},l.a.createElement(j,{currentCat:N,catSelect:function(e){n({type:"CAT_SELECT",payload:e})}}),l.a.createElement("div",{className:L.a.list},b?l.a.createElement(S.a,{text:"Loading..."}):C.map((function(e){return l.a.createElement(s.b,{key:e.id,className:L.a.album,to:"/album/".concat(e.id)},l.a.createElement("div",{className:"hoverBox"},l.a.createElement("div",{className:L.a.cover},l.a.createElement(E.a,{src:e.coverImgUrl,width:"100%",height:"auto"}),l.a.createElement("div",{className:L.a.playCount},l.a.createElement(d.a,{type:"icon-play-count",style:{fontSize:16,marginRight:2}}),l.a.createElement("span",null,e.playCount)),l.a.createElement("div",{className:L.a.creatorName},e.creator.nickname)),l.a.createElement("div",{className:L.a.name},e.name)))}))),l.a.createElement(m.a,{className:L.a.pagination,defaultCurrent:1,current:v,total:g,onChange:function(e){n({type:"PAGE_CHANGE",payload:e})},defaultPageSize:35,showSizeChanger:!1})))}}}]);
//# sourceMappingURL=5.6e06e384.chunk.js.map