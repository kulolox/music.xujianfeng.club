{"version":3,"sources":["components/Player/index.module.less","components/ListButton/index.module.less","components/Volume/index.tsx","components/ScrollContainer/index.tsx","components/Lyric/index.tsx","components/ListButton/index.tsx","components/Player/index.tsx","components/PlayerBox/index.tsx","App.tsx","serviceWorker.ts","store/rootReducer.ts","store/index.ts","index.tsx","components/IconFont/index.tsx","store/playerSlice.ts","components/Duration/index.tsx","components/PlayerBox/index.module.less","components/ScrollContainer/index.module.less","components/Lyric/index.module.less","components/Volume/index.module.less","api/config.ts","api/request.ts","api/index.ts","store/albumSlice.ts"],"names":["module","exports","Volume","props","useState","volume","value","setVal","showVolume","setShowVolume","onVolumeChange","useCallback","val","onChange","onVolumeAfterChange","toggleVolume","className","styles","onClick","type","icon","IconFont","content","min","max","onAfterChange","ScrollContainer","children","getContainerDom","React","slideBlockStyle","setSlideBlockStyle","hasScrollBar","setHasScrollBar","container","useRef","parseDom","dom","current","clientHeight","scrollHeight","scrollTop","slideBlockHeight","slideBlockTop","height","top","handelScroll","e","target","useEffect","addEventListener","removeEventListener","classNames","ref","scrollContent","scrollBar","style","timeExp","scroll","distance","start","maxScrollTop","window","requestAnimationFrame","work","timestamp","t","progress","easeCubicInOut","newScrollTop","Lyric","playedSeconds","useSelector","state","player","formatLyrics","useMemo","lyricStr","lines","split","lyricArr","i","length","line","result","exec","txt","replace","trim","push","time","sort","a","b","parseLyric","lyric","timeRange","map","lyr","lyricDom","document","getElementsByClassName","activeIndex","setActiveIndex","setContainer","containerDom","index","range","len","indexOf","getTimeIndex","offsetTop","lyrContainer","active","key","ListButton","list","playing","currentIndex","dispatch","useDispatch","showContainer","setShowContainer","setLyric","toggleContainer","play","id","playById","data","getSongLyric","lrc","fetch","count","overflowCount","size","offset","backImg","backgroundImage","coverImgUrl","listBox","head","item","songName","name","songCreator","authors","second","Duration","seconds","canPlaying","shape","lyricBox","noLyric","Player","RPlayer","progressValue","setProgressValue","seeking","setSeeking","setVolume","hasPrevSong","hasNextSong","hastSong","togglePlaySong","togglePlay","prevSong","prev","nextSong","next","onEndedSong","onEnded","onProgressSong","setPlayedSconds","progressChange","progressAfterChange","seekTo","reactPlayer","url","onProgress","audio","controller","button","disabled","fontSize","main","coverImage","spin","src","defaultValue","tooltipVisible","Math","floor","menu","PlayerBox","isLock","setLock","toggltLock","playerBox","locked","lockBox","Home","lazy","Album","App","Suspense","fallback","path","exact","component","Boolean","location","hostname","match","rootReducer","combineReducers","album","albumReducer","playerReducer","getDefaultMiddleware","logger","store","configureStore","reducer","devTools","process","middleware","require","default","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","createFromIconfontCN","scriptUrl","playerSlice","createSlice","initialState","loop","reducers","setSongList","action","payload","findIndex","actions","moment","Date","utcOffset","format","axiosConfig","baseURL","transformResponse","timeout","responseType","maxContentLength","validateStatus","status","pending","cancelToken","axios","CancelToken","removePending","config","p","method","cancel","splice","request","create","interceptors","use","c","Promise","reject","response","res","baseUrl","getBanner","get","getCatlist","getAlbumList","limit","cat","order","getAlbumDetail","getSongList","ids","getSongUrl","albumSlice","info","albumId","nickname","tags","description","trackIds","setInfo","setList"],"mappings":"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","file":"static/js/main.672dce5e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoverBox\":\"lxJgT-fjjXw_7rraI7bYO\",\"player\":\"_3DhximAgjXprNcUZvJJBb4\",\"reactPlayer\":\"_1yyFOoDVcQdeF46adma20G\",\"audio\":\"_1Pe6zvjWU7bP1BxTzrxfas\",\"controller\":\"_25Bhje6NAFAFpknQ8HFM4R\",\"button\":\"rurHG8HbXrba9qsVi4f3_\",\"menu\":\"tgQynu_4eKMbG5-UX8NkB\",\"main\":\"_2LSEyGu8uCYgyGJBEVdlkJ\",\"coverImage\":\"_2pf_EtHe9NDw5Z8fvato1L\",\"spin\":\"_30ngn5ABA0-3TrCmuuUD_R\",\"rotate\":\"VV3QjzPv7HgLzppge8uuk\",\"content\":\"_2LqOGvkdyJ1x7e0HI66wJg\",\"head\":\"_1RbOSRgvGKJaxeyTPBFW7m\",\"progress\":\"G4ENEoFI9vPatAgt8CmgA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"a6LQ8jH5s49G351r4ry7A\",\"container\":\"_2Ex41Yg_HOsOU7-4IRjHd6\",\"backImg\":\"_2QytdlD314vM28E_GjkCsB\",\"content\":\"_2sVBbfzRY1t02kW6eFtVUL\",\"listBox\":\"_1Hhoot-IWJearnO66CCcGc\",\"item\":\"_1ipFW7xxMy_LMa93DRLtAm\",\"index\":\"_2ZaAShsI4txn8XRiKMSyNh\",\"songName\":\"_3Rd8d84-JHQMmWw5400qST\",\"songCreator\":\"_1ws7ebM5Qg-eWBGUyDKofa\",\"second\":\"_16OakXNbCl67ve9HL3mlJw\",\"canPlaying\":\"_3XqRWv2yA9kg7k6hWTjJR4\",\"lyricBox\":\"_35EbM6I0BzHk5Qtw_KG4iq\",\"noLyric\":\"_1-sA9-yTHUVggM-APKVpas\",\"head\":\"_2H1WObJgHWY9rZqdPvlqBV\"};","import React, { useCallback, useState } from 'react';\nimport { Slider, Button } from 'antd';\nimport IconFont from '@components/IconFont';\nimport styles from './index.module.less';\n\ninterface IProps {\n  volume: number;\n  onChange: Function;\n}\n\nconst Volume = (props: IProps) => {\n  const [value, setVal] = useState(props.volume);\n  const [showVolume, setShowVolume] = useState(false);\n  const onVolumeChange = useCallback(val => {\n    setVal(val);\n    props.onChange(val);\n  }, []);\n\n  const onVolumeAfterChange = useCallback(val => {\n    toggleVolume(false);\n  }, []);\n\n  const toggleVolume = useCallback(val => {\n    setShowVolume(val);\n  }, []);\n\n  return (\n    <div className={styles.volume}>\n      <Button onClick={() => toggleVolume(!showVolume)} type=\"text\" icon={<IconFont type=\"icon-volume\" />} />\n      {showVolume && (\n        <div className={styles.content}>\n          <Slider value={value} min={0} max={100} onChange={onVolumeChange} onAfterChange={onVolumeAfterChange} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Volume;\n","import React, { ReactNode, useEffect, useRef, useCallback } from 'react';\nimport classNames from 'classnames';\nimport styles from './index.module.less';\n\ninterface IProps {\n  children: ReactNode;\n  className?: string;\n  getContainerDom?: Function;\n}\n\nconst ScrollContainer = (props: IProps) => {\n  const { className, children, getContainerDom } = props;\n  const [slideBlockStyle, setSlideBlockStyle] = React.useState<object>({});\n  const [hasScrollBar, setHasScrollBar] = React.useState(true);\n  const container = useRef<HTMLDivElement>(null);\n\n  // 解析滚动条\n  const parseDom = useCallback((dom = container.current) => {\n    if (!dom) return;\n    const { clientHeight, scrollHeight, scrollTop } = dom;\n    // 滑块高度\n    const slideBlockHeight = clientHeight ** 2 / scrollHeight;\n    // 滑块距离顶部距离\n    const slideBlockTop = (scrollTop * (clientHeight - slideBlockHeight)) / (scrollHeight - clientHeight);\n\n    if (slideBlockTop !== slideBlockTop) {\n      setHasScrollBar(false);\n    } else {\n      setHasScrollBar(true);\n      setSlideBlockStyle({\n        height: slideBlockHeight, // 滑块高度\n        top: slideBlockTop, // 滑块距离顶部距离\n      });\n    }\n  }, []);\n\n  const handelScroll = React.useCallback(e => {\n    parseDom(e.target);\n  }, []);\n\n  useEffect(() => {\n    // 滚动容器dom传递到父组件\n    if (getContainerDom) {\n      getContainerDom(container.current);\n    }\n    container.current!.addEventListener('scroll', handelScroll);\n    return () => container.current!.removeEventListener('scroll', handelScroll);\n  }, []);\n\n  return (\n    <div className={classNames(styles.container, className)}>\n      <div ref={container} className={styles.scrollContent}>\n        {children}\n      </div>\n      {hasScrollBar && (\n        <div className={styles.scrollBar}>\n          <span style={{ ...slideBlockStyle }} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScrollContainer;\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { easeCubicInOut } from 'd3-ease';\nimport ScrollContainer from '@components/ScrollContainer';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store/rootReducer';\nimport styles from './index.module.less';\n\ninterface ILyric {\n  time: number;\n  txt: string;\n}\n\nconst timeExp = /\\[(\\d{2}):(\\d{2}\\.\\d{1,3})\\]/g;\n\nconst BASELINE = 180;\n\n// 解析歌词\nconst parseLyric = (lyricStr: string) => {\n  if (!lyricStr) return [];\n  const lines = lyricStr.split('\\n');\n  let lyricArr: ILyric[] = [];\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    let result: any = timeExp.exec(line);\n    if (result) {\n      // 去掉时间，留下歌词部分\n      const txt = line.replace(timeExp, '').trim();\n      if (txt) {\n        lyricArr.push({\n          time: result[1] * 60 + result[2] * 1,\n          txt,\n        });\n      }\n    }\n  }\n  lyricArr.sort((a, b) => a.time - b.time);\n  return lyricArr;\n};\n\n/**\n *\n * @param time 当前播放进度\n * @param range 歌词提取出的时间数组\n */\nconst getTimeIndex = (time: number, range: number[]) => {\n  const len = range.length;\n  if (time <= range[0]) return 0;\n  if (time >= range[len - 1]) return len - 1;\n  let index = 0;\n  for (const t of range) {\n    if (t > time) {\n      index = range.indexOf(t) - 1;\n      break;\n    }\n  }\n  return index;\n};\n\nconst scroll = (dom: HTMLDivElement, distance: number) => {\n  const duration = 600; // 动画持续时间(ms)\n  let state = 0;\n  let start: number | null = null;\n  const { scrollTop } = dom;\n  const maxScrollTop = distance - scrollTop;\n  const work = (timestamp: number) => {\n    if (!start) {\n      start = timestamp;\n    }\n    state = timestamp - start;\n    const t = state / duration;\n    let progress = easeCubicInOut(t);\n    if (progress > 1) {\n      progress = 1;\n    }\n    const newScrollTop = maxScrollTop * progress;\n    dom.scrollTop = newScrollTop + scrollTop;\n    if (progress < 1) {\n      window.requestAnimationFrame(work);\n    }\n  };\n  window.requestAnimationFrame(work);\n};\n\n// containerDom：滚动容器， 当前dom：dom\nconst srcollToActiveLine = (containerDom: any, dom: any) => {\n  if (!containerDom) return;\n  // 如果当前标亮的段落超过基准线，则滚动超过的部分\n  if (dom.offsetTop > BASELINE) {\n    scroll(containerDom, dom.offsetTop - BASELINE);\n  } else {\n    scroll(containerDom, 0);\n  }\n};\n\ninterface Iprops {\n  lyric: string;\n}\n\nconst Lyric = (props: Iprops) => {\n  const { playedSeconds } = useSelector((state: RootState) => state.player);\n  // 歌词解析时间轴数据\n  const formatLyrics = useMemo(() => parseLyric(props.lyric), [props.lyric]);\n  // 时间轴\n  const timeRange = useMemo(() => formatLyrics.map(lyr => lyr.time), [formatLyrics]);\n  // 歌词渲染dom\n  const lyricDom = useRef<any>(document.getElementsByClassName('lyric'));\n  // 当前播放歌词\n  const [activeIndex, setActiveIndex] = useState(0);\n  // 滚动容器\n  const [container, setContainer] = useState<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const index = getTimeIndex(playedSeconds, timeRange);\n    setActiveIndex(index);\n    if (lyricDom.current.length > 0) {\n      srcollToActiveLine(container, lyricDom.current[index]);\n    }\n  }, [playedSeconds]);\n\n  return (\n    <ScrollContainer getContainerDom={(ref: HTMLDivElement) => setContainer(ref)}>\n      <div className={styles.lyrContainer}>\n        {formatLyrics.map((line, index) => (\n          <div\n            className={classNames('lyric', styles.line, {\n              [styles.active]: activeIndex === index,\n            })}\n            key={line.time}\n          >\n            {line.txt}\n          </div>\n        ))}\n      </div>\n    </ScrollContainer>\n  );\n};\n\nexport default Lyric;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { Button, Badge } from 'antd';\nimport { useSelector, useDispatch } from 'react-redux';\nimport IconFont from '@components/IconFont';\nimport ScrollContainer from '@components/ScrollContainer';\nimport Duration from '@components/Duration';\nimport { RootState } from '@/store/rootReducer';\nimport { playById } from '@/store/playerSlice';\nimport { getSongLyric } from '@/api';\nimport Lyric from '@components/Lyric';\nimport styles from './index.module.less';\n\nconst ListButton = () => {\n  const { list, playing, currentIndex } = useSelector((state: RootState) => state.player);\n  const dispatch = useDispatch();\n  const [showContainer, setShowContainer] = useState(false);\n  const [lyric, setLyric] = useState('');\n  const toggleContainer = useCallback(val => {\n    setShowContainer(val);\n  }, []);\n  const play = useCallback(id => {\n    dispatch(playById({ data: { id } }));\n  }, []);\n  useEffect(() => {\n    // 初始化歌词\n    setLyric('');\n    // 获取歌词\n    const fetch = async () => {\n      const id = list[currentIndex]?.id;\n      if (id) {\n        const result = await getSongLyric(id);\n        if (result.data.lrc) {\n          setLyric(result.data.lrc.lyric);\n        }\n      }\n    };\n    fetch();\n  }, [currentIndex]);\n  return (\n    <div className={styles.list}>\n      <Badge count={list.length} overflowCount={99} size=\"small\" offset={[5, 0]}>\n        <Button\n          onClick={() => toggleContainer(!showContainer)}\n          type=\"text\"\n          icon={<IconFont type=\"icon-music-list\" />}\n        />\n      </Badge>\n      {showContainer && (\n        <div className={styles.container}>\n          <div className={styles.backImg} style={{ backgroundImage: `url('${list[currentIndex].coverImgUrl}')` }} />\n          <div className={styles.content}>\n            <div className={styles.listBox}>\n              <div className={styles.head}>播放列表</div>\n              <ScrollContainer>\n                {list.map((item, index) => (\n                  <div key={item.id} className={styles.item}>\n                    <div className={styles.index}>{index + 1}</div>\n                    <div className={styles.songName}>{item.name}</div>\n                    <div className={styles.songCreator}>{item.authors}</div>\n                    <div className={styles.second}>\n                      <Duration seconds={item.seconds} />\n                    </div>\n                    <div className={styles.canPlaying}>\n                      <Button\n                        shape=\"circle\"\n                        type=\"ghost\"\n                        size=\"small\"\n                        onClick={() => play(item.id)}\n                        icon={\n                          index === currentIndex && playing ? (\n                            <IconFont type=\"icon-pause\" />\n                          ) : (\n                            <IconFont type=\"icon-play\" />\n                          )\n                        }\n                      />\n                    </div>\n                  </div>\n                ))}\n              </ScrollContainer>\n            </div>\n            <div className={styles.lyricBox}>\n              <div className={styles.head}>歌词</div>\n              {lyric ? <Lyric lyric={lyric} /> : <div className={styles.noLyric}>暂无歌词</div>}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ListButton;\n","import React, { useCallback, useRef, useMemo, useState } from 'react';\nimport { Button, Avatar, Slider } from 'antd';\nimport ReactPlayer from 'react-player';\nimport classNames from 'classnames';\nimport IconFont from '@components/IconFont';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '@/store/rootReducer';\nimport { prev, next, togglePlay, onEnded, setPlayedSconds } from '@/store/playerSlice';\nimport Duration from '@components/Duration';\nimport Volume from '@components/Volume';\nimport ListButton from '@components/ListButton';\nimport styles from './index.module.less';\n\nconst DEFAULT_COVER_IMAGE = 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png';\n\nconst Player = () => {\n  const { currentIndex, list, playing } = useSelector((state: RootState) => state.player);\n  const dispatch = useDispatch();\n  const RPlayer = useRef<ReactPlayer>(null);\n  const [progressValue, setProgressValue] = useState(0);\n  // 拖动进度条时不更新数据\n  const [seeking, setSeeking] = useState(false);\n  const [volume, setVolume] = useState(60);\n  // 类似computed效果\n  const hasPrevSong = useMemo(() => currentIndex > 0, [currentIndex]);\n  const hasNextSong = useMemo(() => currentIndex < list.length - 1, [currentIndex, list]);\n  const hastSong = useMemo(() => list.length > 0, [list]);\n\n  // redux\n  const togglePlaySong = useCallback(() => {\n    dispatch(togglePlay());\n  }, []);\n  const prevSong = useCallback(() => {\n    dispatch(prev());\n  }, []);\n  const nextSong = useCallback(() => {\n    dispatch(next());\n  }, []);\n  const onEndedSong = useCallback(() => {\n    dispatch(onEnded());\n  }, []);\n  const onProgressSong = useCallback(state => {\n    dispatch(setPlayedSconds({ data: { playedSeconds: state.playedSeconds } }));\n    if (!seeking) {\n      setProgressValue(state.playedSeconds);\n    }\n  }, []);\n\n  // 本地状态\n  const onVolumeChange = useCallback(val => {\n    setVolume(val);\n  }, []);\n  const progressChange = useCallback(val => {\n    setSeeking(true);\n    setProgressValue(val);\n  }, []);\n  const progressAfterChange = useCallback(val => {\n    setSeeking(false);\n    RPlayer.current!.seekTo(val);\n  }, []);\n\n  return (\n    <div className={styles.player}>\n      <div className={styles.reactPlayer}>\n        <ReactPlayer\n          ref={RPlayer}\n          url={list[currentIndex]?.url}\n          playing={playing}\n          volume={volume / 100}\n          onProgress={onProgressSong}\n          onEnded={onEndedSong}\n        />\n      </div>\n      <div className={styles.audio}>\n        <div className={styles.controller}>\n          <div className={styles.button}>\n            <Button\n              onClick={prevSong}\n              disabled={!hasPrevSong}\n              shape=\"circle\"\n              type=\"ghost\"\n              icon={<IconFont type=\"icon-prev\" />}\n            />\n          </div>\n          <div className={styles.button}>\n            <Button\n              disabled={!hastSong}\n              onClick={togglePlaySong}\n              shape=\"circle\"\n              type=\"ghost\"\n              size=\"large\"\n              icon={playing ? <IconFont style={{ fontSize: 25 }} type=\"icon-pause\" /> : <IconFont type=\"icon-play\" />}\n            />\n          </div>\n          <div className={styles.button}>\n            <Button\n              onClick={nextSong}\n              disabled={!hasNextSong}\n              shape=\"circle\"\n              type=\"ghost\"\n              icon={<IconFont type=\"icon-next\" />}\n            />\n          </div>\n        </div>\n        <div className={styles.main}>\n          <Avatar\n            className={classNames(styles.coverImage, { [styles.spin]: playing })}\n            src={list[currentIndex]?.coverImgUrl ?? DEFAULT_COVER_IMAGE}\n          />\n          <div className={styles.content}>\n            <div className={styles.head}>\n              <div>{list[currentIndex]?.name ?? '暂无'}</div>\n              <div>\n                <Duration seconds={progressValue} />\n                /\n                <Duration seconds={list[currentIndex]?.seconds ?? 0} />\n              </div>\n            </div>\n            <div className={styles.progress}>\n              <Slider\n                onAfterChange={progressAfterChange}\n                onChange={progressChange}\n                defaultValue={0}\n                tooltipVisible={false}\n                value={progressValue}\n                max={Math.floor(list[currentIndex]?.seconds)}\n              />\n            </div>\n          </div>\n        </div>\n        <div className={styles.menu}>\n          <div className={styles.button}>\n            <Volume volume={volume} onChange={onVolumeChange} />\n          </div>\n          {/* <div className={styles.button}>\n            <Button type=\"text\" icon={<SyncOutlined color=\"#fff\" />} />\n          </div> */}\n          <div className={styles.button}>\n            <ListButton />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Player;\n","import React, { useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport styles from './index.module.less';\nimport IconFont from '../IconFont';\nimport Player from '../Player';\n\nconst PlayerBox = () => {\n  // TODO 播放器容器暂时展开\n  const [isLock, setLock] = useState(false);\n  const toggltLock = useCallback(val => {\n    setLock(val);\n  }, []);\n  return (\n    <div className={classNames(styles.playerBox, { [styles.locked]: isLock })}>\n      <div className={styles.lockBox} onClick={() => toggltLock(!isLock)}>\n        <IconFont type={isLock ? 'icon-lock_fill' : 'icon-unlock_fill'} />\n      </div>\n      <div className={styles.player}>\n        <Player />\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerBox;\n","import React, { Fragment } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport PlayerBox from '@components/PlayerBox';\nimport './App.css';\n\nconst Home = React.lazy(() => import('@pages/home'));\nconst Album = React.lazy(() => import('@pages/album'));\n\nfunction App(): JSX.Element {\n  return (\n    <Fragment>\n      <Router>\n        <React.Suspense fallback=\"加载中...\">\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/album/:id?\" exact component={Album} />\n          </Switch>\n        </React.Suspense>\n      </Router>\n      <PlayerBox />\n    </Fragment>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from '@reduxjs/toolkit';\nimport albumReducer from './albumSlice';\nimport playerReducer from './playerSlice';\n\nconst rootReducer = combineReducers({\n  album: albumReducer,\n  player: playerReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport logger from 'redux-logger';\nimport { useDispatch } from 'react-redux';\nimport rootReducer from './rootReducer';\n\nconst middleware = [...getDefaultMiddleware(), logger];\n\nconst store = configureStore({\n  reducer: rootReducer,\n  devTools: process.env.NODE_ENV !== 'production',\n  middleware: process.env.NODE_ENV !== 'production' ? middleware : [],\n});\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').defult;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport './index.css';\n\nconst render = (): void => {\n  const App = require('./App').default;\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root'),\n  );\n};\n\nrender();\n\n// 热加载\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { createFromIconfontCN } from '@ant-design/icons';\n\nconst IconFont = createFromIconfontCN({\n  scriptUrl: '//at.alicdn.com/t/font_2060370_k34zyn39meh.js',\n});\n\nexport default IconFont;\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport interface IList {\n  id: string; // 歌曲id\n  name: string; // 歌曲名\n  seconds: number; // 歌曲时长\n  authors: string; // 歌曲作者\n  coverImgUrl: string; // 歌曲封面\n  canPlaying: boolean; // 歌曲是否可以播放\n  url: string;\n}\n\ninterface IPlayerDefaultState {\n  currentIndex: number; // 当前播放歌曲\n  playing: boolean;\n  loop: boolean;\n  list: IList[];\n  playedSeconds: number;\n}\n\nconst defaultState: IPlayerDefaultState = {\n  currentIndex: -1,\n  playing: false,\n  loop: false,\n  playedSeconds: 0,\n  list: [],\n};\n\nconst playerSlice = createSlice({\n  name: 'player',\n  initialState: defaultState,\n  reducers: {\n    setSongList: (state, action) => {\n      state.list = action.payload.data;\n      state.currentIndex = 0;\n    },\n    setPlayedSconds: (state, action) => {\n      state.playedSeconds = action.payload.data.playedSeconds;\n    },\n    prev: state => {\n      state.currentIndex -= 1;\n      state.playing = true;\n    },\n    next: state => {\n      state.currentIndex += 1;\n      state.playing = true;\n    },\n    playById: (state, action) => {\n      state.currentIndex = state.list.findIndex(t => t.id === action.payload.data.id);\n      state.playing = true;\n    },\n    togglePlay: state => {\n      state.playing = !state.playing;\n    },\n    onEnded: state => {\n      const { currentIndex, list, loop } = state;\n      // 单曲循环\n      if (loop) {\n        // TODO 单曲循环\n      }\n      // 顺序播放\n      if (currentIndex < list.length - 1) {\n        state.currentIndex += 1;\n        state.playing = true;\n      } else {\n        state.playing = false;\n      }\n    },\n  },\n});\n\nexport const { setSongList, prev, next, togglePlay, playById, onEnded, setPlayedSconds } = playerSlice.actions;\nexport default playerSlice.reducer;\n","import React from 'react';\nimport moment from 'moment';\n\ninterface IProps {\n  className?: string;\n  seconds: number;\n}\n\nconst getDate = (seconds: number) => {\n  return new Date(seconds * 1000);\n};\n\nconst Duration = (props: IProps) => {\n  return <span className={props.className}>{moment(getDate(props.seconds)).utcOffset(0).format('mm:ss')}</span>;\n};\n\nexport default Duration;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"playerBox\":\"_1URRVA-GI-BhQrZHYVMx7q\",\"lockBox\":\"_3x_32CtSBvIaSYOhs1xoFw\",\"locked\":\"_1KXt7a7thzbSV41Jrlm5r3\",\"player\":\"_2FmyDK_X0toHzM-xWlgwrg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_1y9RWNpnFF9NnWRjrpfKOK\",\"scrollContent\":\"_1lIo99iXuF_CW3FF83M_DZ\",\"scrollBar\":\"_1_rEIrL1zBBv65zuNSJ9E7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lyrContainer\":\"_1a6TKPrmA2yA-mdG0ocUF7\",\"line\":\"_3xHnyZFn_a2C6Pr6h7xKOP\",\"active\":\"Uiru2n3655rzFDIkKA2BE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"volume\":\"_14kz-6xQSn7TCbxYi2SFtB\",\"content\":\"UhJJOr8LRnntL8T0glbT2\"};","import { AxiosResponse, AxiosRequestConfig } from 'axios';\n\nconst axiosConfig: AxiosRequestConfig = {\n  baseURL: '/',\n  // 请求后的数据处理\n  transformResponse: [\n    function (data: AxiosResponse): AxiosResponse {\n      return data;\n    },\n  ],\n  timeout: 30000,\n  responseType: 'json',\n  // 最大响应数据大小\n  maxContentLength: 2000,\n  // 自定义错误状态码范围\n  validateStatus: function (status: number) {\n    return status >= 200 && status < 300;\n  },\n};\n\nexport default axiosConfig;\n","import axios, { AxiosRequestConfig } from 'axios';\nimport config from './config';\n\nconst pending: Array<{\n  url: string;\n  cancel: Function;\n}> = [];\n\nconst cancelToken = axios.CancelToken;\n\nconst removePending = (config: AxiosRequestConfig) => {\n  for (const p in pending) {\n    const item: any = p;\n    const list: any = pending[p];\n    // 当前请求在数组中存在时执行函数体\n    if (list.url === config.url + '&request_type=' + config.method) {\n      // 执行取消操作\n      list.cancel();\n      // 从数组中移除记录\n      pending.splice(item, 1);\n    }\n  }\n};\n\nconst request = axios.create(config);\n\n// 添加请求拦截器\nrequest.interceptors.request.use(\n  config => {\n    removePending(config);\n    config.cancelToken = new cancelToken(c => {\n      pending.push({\n        url: config.url + '&request_type=' + config.method,\n        cancel: c,\n      });\n    });\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  },\n);\n\n// 返回状态判断(添加响应拦截器)\nrequest.interceptors.response.use(\n  res => {\n    removePending(res.config);\n    return res;\n  },\n  error => {\n    return Promise.reject(error);\n  },\n);\n\nexport default request;\n","import request from './request';\nimport { AxiosResponse } from 'axios';\nconst baseUrl = 'https://api.xujianfeng.club';\n\n/**\n * 获取首页轮播图\n * @param {string} type [0:pc;1:android;2:iphone;3:ipad]\n */\nfunction getBanner(type: number): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/banner?type=${type}`);\n}\n\n/**\n * 获取歌单分类\n */\nfunction getCatlist(): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/playlist/catlist`);\n}\n\n/**\n * 获取歌单分类\n */\nfunction getHotCatlist(): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/playlist/hot`);\n}\n\n// 歌单查询参数\ninterface AlbumArg {\n  limit: number;\n  cat: string;\n  offset: number;\n  order?: string;\n}\n\n/**\n * 获取歌单\n */\nfunction getAlbumList({ limit, cat, offset = 0, order = 'hot' }: AlbumArg): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/top/playlist/?limit=${limit}&order=${order}&offset=${offset}&cat=${cat}`);\n}\n\n/**\n * 获取（歌单）专辑 详情\n * @param {string} id\n */\nfunction getAlbumDetail(id: string): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/playlist/detail?id=${id}`);\n}\n\n/**\n * 获取歌曲列表\n * @param {string} id\n */\nfunction getSongList(ids: string): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/song/detail?ids=${ids}`);\n}\n\n/**\n * 获取歌曲播放链接\n * @param {string} id\n */\nfunction getSongUrl(id: string): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/song/url?id=${id}`);\n}\n\n/**\n * 获取歌曲歌词\n * @param {string} id\n */\nfunction getSongLyric(id: string): Promise<AxiosResponse> {\n  return request.get(`${baseUrl}/lyric?id=${id}`);\n}\n\nexport { getBanner, getCatlist, getHotCatlist, getAlbumList, getAlbumDetail, getSongList, getSongUrl, getSongLyric };\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport interface IInfo {\n  albumId: string;\n  name: string;\n  nickname: string;\n  coverImgUrl: string;\n  description: string;\n  trackIds: string[];\n  tags: string[];\n}\n\nexport interface IList {\n  id: string; // 歌曲id\n  name: string; // 歌曲名\n  seconds: number; // 歌曲时长\n  authors: string; // 歌曲作者\n  coverImgUrl: string; // 歌曲封面\n  canPlaying: boolean; // 歌曲是否可以播放\n  url?: string;\n}\n\ninterface IAlbumDefaultState {\n  info: IInfo;\n  list: IList[];\n}\n\nconst defaultState: IAlbumDefaultState = {\n  info: {\n    albumId: '',\n    name: '',\n    nickname: '',\n    coverImgUrl: '',\n    tags: [],\n    description: '',\n    trackIds: [],\n  },\n  list: [],\n};\n\nconst albumSlice = createSlice({\n  name: 'album',\n  initialState: defaultState,\n  reducers: {\n    setInfo: (state, action) => {\n      state.info = action.payload.data;\n    },\n    setList: (state, action) => {\n      state.list = action.payload.data;\n    },\n  },\n});\n\nexport const { setInfo, setList } = albumSlice.actions;\nexport default albumSlice.reducer;\n"],"sourceRoot":""}