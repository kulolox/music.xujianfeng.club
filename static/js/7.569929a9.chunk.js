(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[7],{247:function(e,a,t){e.exports={album:"_2hzivxDtZ7Lpvgv_X6pVe_",head:"_2G7dEGYEINlmoML5hs1NhP",logo:"_1XpWqywhwbUYPRNTj_2SwZ",img:"SjhxsrVLLEEskJ03LfpEl",main:"_1-lryxsU1rMvVjdxnaLMSB",name:"_1TgPIWbSRfEXB5K_PytIj-",nickname:"_1jILlatWTSWRHiqXAiGlp6",tags:"_2NXyU-l3NDvjYBWcqg7rAo",listBox:"_380ztTIKx73V2U9a6z6OTk",title:"_2R7Lx1geUI8ZuUW1MaR26i",item:"_1UK-h9FidD_9NTxhMCLDzD",index:"_3FrKiNJzzQaolrCA5-D_lD",songName:"_2b0O4qR1U949NuqZHG0rDW",songCreator:"_2Ekk2V7bfLi-WIEHRrawnv",second:"_3HGrHnDeHpZumNXgIB0ahX",canPlaying:"_3B08xlREDZ2TTBjaHLS8na"}},261:function(e,a,t){"use strict";t.r(a);var n=t(99),c=t(75),r=t.n(c),i=t(88),s=t(10),l=t(0),m=t.n(l),o=t(262),u=t(258),d=t(177),f=t(259),p=t(29),b=t(91),v=t(89);var g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=e.length,n=[];if(t<=a)return[e];for(var c=0;c<t;c+=a)n.push(e.slice(c,c+a));return n},E=t(52),j=t(35),N=t(247),k=t.n(N);a.default=function(e){var a=Object(p.b)(),t=Object(l.useState)(e.match.params.id),c=Object(s.a)(t,1)[0],N=Object(l.useState)(!0),O=Object(s.a)(N,2),h=O[0],x=O[1],_=Object(p.c)((function(e){return e.album})),I=Object(l.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(t);case 2:n=e.sent,c=n.data,i=c.playlist,s={albumId:i.id,name:i.name,nickname:i.creator.nickname,coverImgUrl:i.coverImgUrl,description:i.description,tags:i.tags,trackIds:i.trackIds},a(Object(b.b)({data:s})),y(s.trackIds);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),y=Object(l.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c,i,s,l,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t.map((function(e){return e.id}))).map((function(e){return e.join(",")})),c=n.map((function(e){return Object(v.e)(e)})),e.next=4,Promise.all(c);case 4:i=e.sent,s=[],l=[],i.forEach((function(e){s=s.concat(e.data.songs),l=l.concat(e.data.privileges)})),m=s.map((function(e,a){return{id:l[a].id,name:e.name,seconds:e.dt/1e3,authors:e.ar.map((function(e){return e.name})).join("\uff0c"),coverImgUrl:e.al.picUrl,canPlaying:(t=l[a],-1!==t.st&&-200!==t.st&&1!==t.fee&&4!==t.fee&&16!==t.fee)};var t})),a(Object(b.c)({data:m})),x(!1),S(m);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),S=Object(l.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var i,s,l,m,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=localStorage.getItem(c)||null)){e.next=5;break}a(Object(j.g)({data:JSON.parse(i)})),e.next=13;break;case 5:return s=t.filter((function(e){return e.canPlaying})),l=s.map((function(e){return Object(v.g)(e.id)})),e.next=9,Promise.all(l);case 9:m=e.sent,o=s.map((function(e,a){return Object(n.a)(Object(n.a)({},e),{},{url:m[a].data.data[0].url})})),localStorage.setItem(c,JSON.stringify(o)),a(Object(j.g)({data:o}));case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),U=Object(l.useCallback)((function(e){a(Object(j.d)({id:e}))}),[]);return Object(l.useEffect)((function(){I(c)}),[c]),m.a.createElement("div",{className:k.a.album},m.a.createElement("div",{className:k.a.head},m.a.createElement("div",{className:k.a.logo},m.a.createElement("img",{className:k.a.img,src:_.info.coverImgUrl,alt:""})),m.a.createElement("div",{className:k.a.main},m.a.createElement("div",{className:k.a.name},m.a.createElement(o.a,{color:"magenta"},"\u6b4c\u5355"),_.info.name),m.a.createElement("div",{className:k.a.nickname},"\u521b\u5efa\u8005\uff1a",_.info.nickname),m.a.createElement("div",{className:k.a.tags},"\u6807\u7b7e\uff1a",_.info.tags.map((function(e){return m.a.createElement(o.a,{key:e},e)}))),m.a.createElement("div",{className:k.a.descript},"\u4ecb\u7ecd\uff1a",_.info.description))),m.a.createElement("div",{className:k.a.listBox},m.a.createElement("div",{className:k.a.title},"\u6b4c\u66f2\u5217\u8868"),m.a.createElement(u.b,{size:"small",loading:h,dataSource:_.list,renderItem:function(e,a){return m.a.createElement(u.b.Item,{key:e.id},m.a.createElement("div",{className:k.a.item},m.a.createElement("div",{className:k.a.index},a+1),m.a.createElement("div",{className:k.a.main},m.a.createElement("div",{className:k.a.songName},e.name),m.a.createElement("div",{className:k.a.songCreator},e.authors)),m.a.createElement("div",{className:k.a.second},m.a.createElement(E.a,{seconds:e.seconds})),m.a.createElement("div",{className:k.a.canPlaying},e.canPlaying?m.a.createElement(d.a,{onClick:function(){return U(e.id)},type:"text",size:"small"},"\u64ad\u653e"):m.a.createElement(d.a,{type:"text",size:"small",disabled:!0},"\u65e0\u7248\u6743"))))}})),m.a.createElement(f.a,{visibilityHeight:600}))}}}]);
//# sourceMappingURL=7.569929a9.chunk.js.map