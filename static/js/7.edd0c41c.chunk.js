(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[7],{247:function(e,a,t){e.exports={album:"_2hzivxDtZ7Lpvgv_X6pVe_",head:"_2G7dEGYEINlmoML5hs1NhP",logo:"_1XpWqywhwbUYPRNTj_2SwZ",img:"SjhxsrVLLEEskJ03LfpEl",main:"_1-lryxsU1rMvVjdxnaLMSB",name:"_1TgPIWbSRfEXB5K_PytIj-",nickname:"_1jILlatWTSWRHiqXAiGlp6",tags:"_2NXyU-l3NDvjYBWcqg7rAo",listBox:"_380ztTIKx73V2U9a6z6OTk",title:"_2R7Lx1geUI8ZuUW1MaR26i",item:"_1UK-h9FidD_9NTxhMCLDzD",index:"_3FrKiNJzzQaolrCA5-D_lD",songName:"_2b0O4qR1U949NuqZHG0rDW",songCreator:"_2Ekk2V7bfLi-WIEHRrawnv",second:"_3HGrHnDeHpZumNXgIB0ahX",canPlaying:"_3B08xlREDZ2TTBjaHLS8na"}},261:function(e,a,t){"use strict";t.r(a);var n=t(99),c=t(75),r=t.n(c),i=t(88),s=t(10),l=t(0),m=t.n(l),o=t(262),u=t(258),d=t(177),f=t(259),p=t(29),v=t(91),b=t(89);var g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=e.length,n=[];if(t<=a)return[e];for(var c=0;c<t;c+=a)n.push(e.slice(c,c+a));return n},E=t(52),j=t(35),N=t(247),h=t.n(N);a.default=function(e){var a=Object(p.b)(),t=Object(l.useState)(e.match.params.id),c=Object(s.a)(t,1)[0],N=Object(l.useState)(!0),k=Object(s.a)(N,2),O=k[0],_=k[1],x=Object(p.c)((function(e){return e.album})),I=Object(l.useCallback)(Object(i.a)(r.a.mark((function e(){var t,n,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(c);case 2:t=e.sent,n=t.data,i=n.playlist,s={albumId:i.id,name:i.name,nickname:i.creator.nickname,coverImgUrl:i.coverImgUrl,description:i.description,tags:i.tags,trackIds:i.trackIds},a(Object(v.b)({data:s})),y(s.trackIds);case 8:case"end":return e.stop()}}),e)}))),[]),y=Object(l.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c,i,s,l,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t.map((function(e){return e.id}))).map((function(e){return e.join(",")})),c=n.map((function(e){return Object(b.e)(e)})),e.next=4,Promise.all(c);case 4:i=e.sent,s=[],l=[],i.forEach((function(e){s=s.concat(e.data.songs),l=l.concat(e.data.privileges)})),m=s.map((function(e,a){return{id:l[a].id,name:e.name,seconds:e.dt/1e3,authors:e.ar.map((function(e){return e.name})).join("\uff0c"),coverImgUrl:e.al.picUrl,canPlaying:(t=l[a],-1!==t.st&&-200!==t.st&&1!==t.fee&&4!==t.fee&&16!==t.fee)};var t})),a(Object(v.c)({data:m})),_(!1),U(m);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),U=Object(l.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var c,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.filter((function(e){return e.canPlaying})),i=c.map((function(e){return Object(b.g)(e.id)})),e.next=4,Promise.all(i);case 4:s=e.sent,l=c.map((function(e,a){return Object(n.a)(Object(n.a)({},e),{},{url:s[a].data.data[0].url})})),a(Object(j.g)({data:l}));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),w=Object(l.useCallback)((function(e){a(Object(j.d)({data:{id:e}}))}),[]);return Object(l.useEffect)((function(){I()}),[]),m.a.createElement("div",{className:h.a.album},m.a.createElement("div",{className:h.a.head},m.a.createElement("div",{className:h.a.logo},m.a.createElement("img",{className:h.a.img,src:x.info.coverImgUrl,alt:""})),m.a.createElement("div",{className:h.a.main},m.a.createElement("div",{className:h.a.name},m.a.createElement(o.a,{color:"magenta"},"\u6b4c\u5355"),x.info.name),m.a.createElement("div",{className:h.a.nickname},"\u521b\u5efa\u8005\uff1a",x.info.nickname),m.a.createElement("div",{className:h.a.tags},"\u6807\u7b7e\uff1a",x.info.tags.map((function(e){return m.a.createElement(o.a,{key:e},e)}))),m.a.createElement("div",{className:h.a.descript},"\u4ecb\u7ecd\uff1a",x.info.description))),m.a.createElement("div",{className:h.a.listBox},m.a.createElement("div",{className:h.a.title},"\u6b4c\u66f2\u5217\u8868"),m.a.createElement(u.b,{size:"small",loading:O,dataSource:x.list,renderItem:function(e,a){return m.a.createElement(u.b.Item,{key:e.id},m.a.createElement("div",{className:h.a.item},m.a.createElement("div",{className:h.a.index},a+1),m.a.createElement("div",{className:h.a.main},m.a.createElement("div",{className:h.a.songName},e.name),m.a.createElement("div",{className:h.a.songCreator},e.authors)),m.a.createElement("div",{className:h.a.second},m.a.createElement(E.a,{seconds:e.seconds})),m.a.createElement("div",{className:h.a.canPlaying},e.canPlaying?m.a.createElement(d.a,{onClick:function(){return w(e.id)},type:"text",size:"small"},"\u64ad\u653e"):m.a.createElement(d.a,{type:"text",size:"small",disabled:!0},"\u65e0\u7248\u6743"))))}})),m.a.createElement(f.a,{visibilityHeight:600}))}}}]);
//# sourceMappingURL=7.edd0c41c.chunk.js.map