(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[1],{126:function(e,t,n){e.exports=n(172)},135:function(e,t,n){},169:function(e,t,n){},17:function(e,t,n){e.exports={list:"a6LQ8jH5s49G351r4ry7A",container:"_2Ex41Yg_HOsOU7-4IRjHd6",backImg:"_2QytdlD314vM28E_GjkCsB",content:"_2sVBbfzRY1t02kW6eFtVUL",listBox:"_1Hhoot-IWJearnO66CCcGc",item:"_1ipFW7xxMy_LMa93DRLtAm",index:"_2ZaAShsI4txn8XRiKMSyNh",songName:"_3Rd8d84-JHQMmWw5400qST",songCreator:"_1ws7ebM5Qg-eWBGUyDKofa",second:"_16OakXNbCl67ve9HL3mlJw",canPlaying:"_3XqRWv2yA9kg7k6hWTjJR4",lyricBox:"_35EbM6I0BzHk5Qtw_KG4iq",noLyric:"_1-sA9-yTHUVggM-APKVpas",head:"_2H1WObJgHWY9rZqdPvlqBV"}},171:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(110),l=n(7),o=n(40),i=n(10),u=n(2),s=n.n(u),m=n(59),d=n.n(m),f=n(25),b=n(178),v=n(181),p=n(177),y=n(21),g=n(29),E=n(53),j=n(81),O=n.n(j),h=function(e){var t=Object(a.useState)(e.volume),n=Object(i.a)(t,2),r=n[0],l=n[1],o=Object(a.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1],d=Object(a.useCallback)((function(t){l(t),e.onChange(t)}),[]),v=Object(a.useCallback)((function(e){y(!1)}),[]),y=Object(a.useCallback)((function(e){m(e)}),[]);return c.a.createElement("div",{className:O.a.volume},c.a.createElement(b.a,{onClick:function(){return y(!s)},type:"text",icon:c.a.createElement(f.a,{type:"icon-volume"})}),s&&c.a.createElement("div",{className:O.a.content},c.a.createElement(p.a,{value:r,min:0,max:100,onChange:d,onAfterChange:v})))},x=n(76),k=n.n(x),N=n(89),C=n(180),_=n(100),S=n(70),I=n.n(S),B=function(e){var t=e.className,n=e.children,r=e.getContainerDom,l=c.a.useState({}),o=Object(i.a)(l,2),u=o[0],m=o[1],d=c.a.useState(!0),f=Object(i.a)(d,2),b=f[0],v=f[1],p=Object(a.useRef)(null),y=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.current;if(e){var t=e.clientHeight,n=e.scrollHeight,a=e.scrollTop,c=Math.pow(t,2)/n,r=a*(t-c)/(n-t);r!==r?v(!1):(v(!0),m({height:c,top:r}))}}),[]),g=c.a.useCallback((function(e){y(e.target)}),[]);return Object(a.useEffect)((function(){return r&&r(p.current),p.current.addEventListener("scroll",g),function(){return p.current.removeEventListener("scroll",g)}}),[]),c.a.createElement("div",{className:s()(I.a.container,t)},c.a.createElement("div",{ref:p,className:I.a.scrollContent},n),b&&c.a.createElement("div",{className:I.a.scrollBar},c.a.createElement("span",{style:Object(_.a)({},u)})))},L=n(90),w=n(120),T=n(176),A=n(71),H=n.n(A),P=/\[(\d{2}):(\d{2}\.\d{1,3})\]/g,z=function(e,t){var n=null,a=e.scrollTop,c=t-a;window.requestAnimationFrame((function t(r){n||(n=r);var l=(r-n)/600,o=Object(T.a)(l);o>1&&(o=1);var i=c*o;e.scrollTop=i+a,o<1&&window.requestAnimationFrame(t)}))},F=function(e){var t=Object(y.c)((function(e){return e.player})).playedSeconds,n=Object(a.useMemo)((function(){return function(e){if(!e)return[];for(var t=e.split("\n"),n=[],a=0;a<t.length;a++){var c=t[a],r=P.exec(c);if(r){var l=c.replace(P,"").trim();l&&n.push({time:60*r[1]+1*r[2],txt:l})}}return n.sort((function(e,t){return e.time-t.time})),n}(e.lyric)}),[e.lyric]),r=Object(a.useMemo)((function(){return n.map((function(e){return e.time}))}),[n]),l=Object(a.useRef)(document.getElementsByClassName("lyric")),u=Object(a.useState)(0),m=Object(i.a)(u,2),d=m[0],f=m[1],b=Object(a.useState)(null),v=Object(i.a)(b,2),p=v[0],g=v[1];return Object(a.useEffect)((function(){f(function(e,t){var n=t.length;if(e<=t[0])return 0;if(e>=t[n-1])return n-1;var a,c=0,r=Object(w.a)(t);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(l>e){c=t.indexOf(l)-1;break}}}catch(o){r.e(o)}finally{r.f()}return c}(t,r))}),[t]),Object(a.useEffect)((function(){var e,t;l.current.length>0&&(e=p,t=l.current[d],e&&(t.offsetTop>180?z(e,t.offsetTop-180):z(e,0)))}),[d]),c.a.createElement(B,{getContainerDom:function(e){return g(e)}},c.a.createElement("div",{className:H.a.lyrContainer},n.map((function(e,t){return c.a.createElement("div",{className:s()("lyric",H.a.line,Object(o.a)({},H.a.active,d===t)),key:e.time+e.txt},e.txt)}))))},R=n(17),J=n.n(R),M=function(){var e=Object(y.c)((function(e){return e.player})),t=e.list,n=e.playing,r=e.currentIndex,l=Object(y.b)(),o=Object(a.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1],d=Object(a.useState)(""),v=Object(i.a)(d,2),p=v[0],j=v[1],O=Object(a.useCallback)((function(e){m(e)}),[]),h=Object(a.useCallback)((function(e){l(Object(g.d)({id:e}))}),[]);return Object(a.useEffect)((function(){j(""),function(){var e=Object(N.a)(k.a.mark((function e(){var n,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(n=t[r])||void 0===n?void 0:n.id)){e.next=6;break}return e.next=4,Object(L.f)(a);case 4:(c=e.sent).data.lrc&&j(c.data.lrc.lyric);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r,t]),c.a.createElement("div",{className:J.a.list},c.a.createElement(C.a,{count:t.length,overflowCount:99,size:"small",offset:[5,0]},c.a.createElement(b.a,{onClick:function(){return O(!s)},type:"text",icon:c.a.createElement(f.a,{type:"icon-music-list"})})),s&&c.a.createElement("div",{className:J.a.container},c.a.createElement("div",{className:J.a.backImg,style:{backgroundImage:"url('".concat(t[r].coverImgUrl,"')")}}),c.a.createElement("div",{className:J.a.content},c.a.createElement("div",{className:J.a.listBox},c.a.createElement("div",{className:J.a.head},"\u64ad\u653e\u5217\u8868"),c.a.createElement(B,null,t.map((function(e,t){return c.a.createElement("div",{key:e.id,className:J.a.item},c.a.createElement("div",{className:J.a.index},t+1),c.a.createElement("div",{className:J.a.songName},e.name),c.a.createElement("div",{className:J.a.songCreator},e.authors),c.a.createElement("div",{className:J.a.second},c.a.createElement(E.a,{seconds:e.seconds})),c.a.createElement("div",{className:J.a.canPlaying},c.a.createElement(b.a,{shape:"circle",type:"ghost",size:"small",onClick:function(){return h(e.id)},icon:t===r&&n?c.a.createElement(f.a,{type:"icon-pause"}):c.a.createElement(f.a,{type:"icon-play"})})))})))),c.a.createElement("div",{className:J.a.lyricBox},c.a.createElement("div",{className:J.a.head},"\u6b4c\u8bcd"),p?c.a.createElement(F,{lyric:p}):c.a.createElement("div",{className:J.a.noLyric},"\u6682\u65e0\u6b4c\u8bcd")))))},U=n(18),W=n.n(U),V=function(){var e,t,n,r,l,u,m=Object(y.c)((function(e){return e.player})),d=m.currentIndex,j=m.list,O=m.playing,x=Object(y.b)(),k=Object(a.useRef)(null),N=Object(a.useState)(0),C=Object(i.a)(N,2),_=C[0],S=C[1],I=Object(a.useState)(0),B=Object(i.a)(I,2),L=B[0],w=B[1],T=Object(a.useState)(!1),A=Object(i.a)(T,2),H=A[0],P=A[1],z=Object(a.useState)(60),F=Object(i.a)(z,2),R=F[0],J=F[1],U=Object(a.useMemo)((function(){return d>0}),[d]),V=Object(a.useMemo)((function(){return d<j.length-1}),[d,j]),q=Object(a.useMemo)((function(){return j.length>0}),[j]),G=Object(a.useCallback)((function(e){x(Object(g.i)({playing:e}))}),[]),D=Object(a.useCallback)((function(){x(Object(g.e)())}),[]),K=Object(a.useCallback)((function(){x(Object(g.b)())}),[]),X=Object(a.useCallback)((function(){x(Object(g.c)())}),[]),Q=Object(a.useCallback)((function(){x(Object(g.f)({playedSeconds:k.current.currentTime})),H||S(k.current.currentTime)}),[]),Y=Object(a.useCallback)((function(){w(k.current.duration)}),[]),Z=Object(a.useCallback)((function(e){J(e)}),[]),$=Object(a.useCallback)((function(e){P(!0),S(e)}),[]),ee=Object(a.useCallback)((function(e){P(!1),k.current.currentTime=e}),[]);return Object(a.useEffect)((function(){k.current.volume=R/100}),[R]),Object(a.useEffect)((function(){O?k.current.play():k.current.pause()}),[d,O]),Object(a.useEffect)((function(){return k.current.addEventListener("timeupdate",Q),k.current.addEventListener("ended",X),k.current.addEventListener("durationchange",Y),function(){k.current.removeEventListener("timeupdate",Q),k.current.removeEventListener("ended",X),k.current.removeEventListener("durationchange",Y)}}),[k.current,d]),c.a.createElement("div",{className:W.a.player},c.a.createElement("audio",{ref:k,src:null===(e=j[d])||void 0===e?void 0:e.url,preload:"auto"}),c.a.createElement("div",{className:W.a.audio},c.a.createElement("div",{className:W.a.controller},c.a.createElement("div",{className:W.a.button},c.a.createElement(b.a,{onClick:D,disabled:!U,shape:"circle",type:"ghost",icon:c.a.createElement(f.a,{type:"icon-prev"})})),c.a.createElement("div",{className:W.a.button},c.a.createElement(b.a,{disabled:!q,onClick:function(){return G(!O)},shape:"circle",type:"ghost",size:"large",icon:O?c.a.createElement(f.a,{style:{fontSize:25},type:"icon-pause"}):c.a.createElement(f.a,{type:"icon-play"})})),c.a.createElement("div",{className:W.a.button},c.a.createElement(b.a,{onClick:K,disabled:!V,shape:"circle",type:"ghost",icon:c.a.createElement(f.a,{type:"icon-next"})}))),c.a.createElement("div",{className:W.a.main},c.a.createElement(v.a,{className:s()(W.a.coverImage,Object(o.a)({},W.a.spin,O)),src:null!==(t=null===(n=j[d])||void 0===n?void 0:n.coverImgUrl)&&void 0!==t?t:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),c.a.createElement("div",{className:W.a.content},c.a.createElement("div",{className:W.a.head},c.a.createElement("div",null,null!==(r=null===(l=j[d])||void 0===l?void 0:l.name)&&void 0!==r?r:"\u6682\u65e0"),c.a.createElement("div",null,c.a.createElement(E.a,{seconds:_}),"/",c.a.createElement(E.a,{seconds:L}))),c.a.createElement("div",{className:W.a.progress},c.a.createElement(p.a,{onAfterChange:ee,onChange:$,defaultValue:0,tooltipVisible:!1,value:_,max:Math.floor(null===(u=j[d])||void 0===u?void 0:u.seconds)})))),c.a.createElement("div",{className:W.a.menu},c.a.createElement("div",{className:W.a.button},c.a.createElement(h,{volume:R,onChange:Z})),c.a.createElement("div",{className:W.a.button},c.a.createElement(M,null)))))},q=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],r=t[1],l=Object(a.useCallback)((function(e){r(e)}),[]);return c.a.createElement("div",{className:s()(d.a.playerBox,Object(o.a)({},d.a.locked,n))},c.a.createElement("div",{className:d.a.lockBox,onClick:function(){return l(!n)}},c.a.createElement(f.a,{type:n?"icon-lock_fill":"icon-unlock_fill"})),c.a.createElement("div",{className:d.a.player},c.a.createElement(V,null)))},G=(n(169),c.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(6)]).then(n.bind(null,262))}))),D=c.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,263))}));t.default=function(){var e=Object(y.b)();return Object(a.useEffect)((function(){var t=localStorage.getItem("cache-song-list")||null;t&&e(Object(g.h)({data:JSON.parse(t)}))}),[]),c.a.createElement(a.Fragment,null,c.a.createElement(r.a,null,c.a.createElement(c.a.Suspense,{fallback:"\u52a0\u8f7d\u4e2d..."},c.a.createElement(l.c,null,c.a.createElement(l.a,{path:"/",exact:!0,component:G}),c.a.createElement(l.a,{path:"/album/:id?",exact:!0,component:D})))),c.a.createElement(q,null))}},172:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),l=n.n(r),o=n(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(121),u=n(41),s=n(116),m=n.n(s),d=n(32),f=n(92),b=n(29),v=Object(d.c)({album:f.a,player:b.a});[].concat(Object(i.a)(Object(u.c)({serializableCheck:!1})),[m.a]);var p=Object(u.a)({reducer:v,devTools:!1,middleware:[]});n(135);!function(){var e=n(171).default;l.a.render(c.a.createElement(o.a,{store:p},c.a.createElement(e,null)),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,n){e.exports={hoverBox:"lxJgT-fjjXw_7rraI7bYO",player:"_3DhximAgjXprNcUZvJJBb4",audio:"_1Pe6zvjWU7bP1BxTzrxfas",controller:"_25Bhje6NAFAFpknQ8HFM4R",button:"rurHG8HbXrba9qsVi4f3_",menu:"tgQynu_4eKMbG5-UX8NkB",main:"_2LSEyGu8uCYgyGJBEVdlkJ",coverImage:"_2pf_EtHe9NDw5Z8fvato1L",spin:"_30ngn5ABA0-3TrCmuuUD_R",rotate:"VV3QjzPv7HgLzppge8uuk",content:"_2LqOGvkdyJ1x7e0HI66wJg",head:"_1RbOSRgvGKJaxeyTPBFW7m",progress:"G4ENEoFI9vPatAgt8CmgA"}},25:function(e,t,n){"use strict";var a=n(173),c=Object(a.a)({scriptUrl:"//at.alicdn.com/t/font_2060370_k34zyn39meh.js"});t.a=c},29:function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return f}));var a=n(41),c=Object(a.b)({name:"player",initialState:{currentIndex:-1,playing:!1,loop:!1,playedSeconds:0,list:[]},reducers:{setSongList:function(e,t){e.list=t.payload.data,e.currentIndex=0},setPlayedSconds:function(e,t){e.playedSeconds=t.payload.playedSeconds},setPlaying:function(e,t){e.playing=t.payload.playing},prev:function(e){e.currentIndex-=1,e.playing=!0},next:function(e){e.currentIndex+=1,e.playing=!0},togglePlaying:function(e,t){var n=t.payload.playing;e.playing=n},playById:function(e,t){e.currentIndex=e.list.findIndex((function(e){return e.id===t.payload.id})),e.playing=!0},onEnded:function(e){var t=e.currentIndex,n=e.list;e.loop;t<n.length-1?(e.currentIndex+=1,e.playing=!0):e.playing=!1}}}),r=c.actions,l=r.setSongList,o=r.prev,i=r.next,u=r.togglePlaying,s=r.playById,m=r.onEnded,d=r.setPlaying,f=r.setPlayedSconds;t.a=c.reducer},53:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r=n(117),l=n.n(r);t.a=function(e){return c.a.createElement("span",{className:e.className},l()((t=e.seconds,new Date(1e3*t))).utcOffset(0).format("mm:ss"));var t}},59:function(e,t,n){e.exports={playerBox:"_1URRVA-GI-BhQrZHYVMx7q",lockBox:"_3x_32CtSBvIaSYOhs1xoFw",locked:"_1KXt7a7thzbSV41Jrlm5r3",player:"_2FmyDK_X0toHzM-xWlgwrg"}},70:function(e,t,n){e.exports={container:"_1y9RWNpnFF9NnWRjrpfKOK",scrollContent:"_1lIo99iXuF_CW3FF83M_DZ",scrollBar:"_1_rEIrL1zBBv65zuNSJ9E7"}},71:function(e,t,n){e.exports={lyrContainer:"_1a6TKPrmA2yA-mdG0ocUF7",line:"_3xHnyZFn_a2C6Pr6h7xKOP",active:"Uiru2n3655rzFDIkKA2BE"}},81:function(e,t,n){e.exports={volume:"_14kz-6xQSn7TCbxYi2SFtB",content:"UhJJOr8LRnntL8T0glbT2"}},90:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return g}));var a=n(82),c=n.n(a),r={baseURL:"/",transformResponse:[function(e){return e}],timeout:3e4,responseType:"json",maxContentLength:2e3,validateStatus:function(e){return e>=200&&e<300}},l=[],o=c.a.CancelToken,i=function(e){for(var t in l){var n=t,a=l[t];a.url===e.url+"&request_type="+e.method&&(a.cancel(),l.splice(n,1))}},u=c.a.create(r);u.interceptors.request.use((function(e){return i(e),e.cancelToken=new o((function(t){l.push({url:e.url+"&request_type="+e.method,cancel:t})})),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return i(e.config),e}),(function(e){return Promise.reject(e)}));var s=u,m="https://api.xujianfeng.club";function d(e){return s.get("".concat(m,"/banner?type=").concat(e))}function f(){return s.get("".concat(m,"/playlist/catlist"))}function b(e){var t=e.limit,n=e.cat,a=e.offset,c=void 0===a?0:a,r=e.order,l=void 0===r?"hot":r;return s.get("".concat(m,"/top/playlist/?limit=").concat(t,"&order=").concat(l,"&offset=").concat(c,"&cat=").concat(n))}function v(e){return s.get("".concat(m,"/playlist/detail?id=").concat(e))}function p(e){return s.get("".concat(m,"/song/detail?ids=").concat(e))}function y(e){return s.get("".concat(m,"/song/url?id=").concat(e))}function g(e){return s.get("".concat(m,"/lyric?id=").concat(e))}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o}));var a=n(41),c=Object(a.b)({name:"album",initialState:{info:{albumId:"",name:"",nickname:"",coverImgUrl:"",tags:[],description:""},list:[]},reducers:{setInfo:function(e,t){e.info=t.payload.data},setList:function(e,t){e.list=t.payload.data}}}),r=c.actions,l=r.setInfo,o=r.setList;t.a=c.reducer}},[[126,2,3]]]);
//# sourceMappingURL=main.cfb25bc2.chunk.js.map