(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[7],{249:function(e,a,t){e.exports={album:"_2hzivxDtZ7Lpvgv_X6pVe_",head:"_2G7dEGYEINlmoML5hs1NhP",logo:"_1XpWqywhwbUYPRNTj_2SwZ",img:"SjhxsrVLLEEskJ03LfpEl",main:"_1-lryxsU1rMvVjdxnaLMSB",name:"_1TgPIWbSRfEXB5K_PytIj-",nickname:"_1jILlatWTSWRHiqXAiGlp6",buttonGroup:"_2oNF_eCmWK3wXiMEX8ipq8",tags:"_2NXyU-l3NDvjYBWcqg7rAo",listBox:"_380ztTIKx73V2U9a6z6OTk",title:"_2R7Lx1geUI8ZuUW1MaR26i",item:"_1UK-h9FidD_9NTxhMCLDzD",index:"_3FrKiNJzzQaolrCA5-D_lD",songName:"_2b0O4qR1U949NuqZHG0rDW",songCreator:"_2Ekk2V7bfLi-WIEHRrawnv",second:"_3HGrHnDeHpZumNXgIB0ahX",canPlaying:"_3B08xlREDZ2TTBjaHLS8na"}},263:function(e,a,t){"use strict";t.r(a);var n=t(47),i=t.n(n),c=t(67),r=t(7),l=t(0),s=t.n(l),m=t(264),o=t(178),u=t(260),d=t(261),f=t(265),b=t(266),v=t(8),E=t(69),p=t(108);var g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=e.length,n=[];if(t<=a)return[e];for(var i=0;i<t;i+=a)n.push(e.slice(i,i+a));return n},N=t(55),j=t(16),k=t(249),_=t.n(k);a.default=function(e){var a=Object(v.b)(),t=Object(l.useState)(e.match.params.id),n=Object(r.a)(t,1)[0],k=Object(l.useState)(!0),h=Object(r.a)(k,2),x=h[0],O=h[1],I=Object(p.a)("cache-song-list",null)[1],y=Object(p.a)(n,{info:{albumId:"",name:"",nickname:"",coverImgUrl:"",tags:[],description:""},list:[]}),U=Object(r.a)(y,2),C=U[0],P=U[1],z=Object(l.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(a){var t,n,c,r,l,s,m,o,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info.albumId){e.next=21;break}return e.next=3,Object(E.a)(a);case 3:return t=e.sent,n=t.data.playlist,c={info:{albumId:a,name:n.name,nickname:n.creator.nickname,coverImgUrl:n.coverImgUrl,description:n.description,tags:n.tags},list:[]},r=g(n.trackIds.map((function(e){return e.id}))).map((function(e){return e.join(",")})),l=r.map((function(e){return Object(E.e)(e)})),e.next=10,Promise.all(l);case 10:return s=e.sent,m=[],o=[],s.forEach((function(e){m=m.concat(e.data.songs),o=o.concat(e.data.privileges)})),c.list=m.map((function(e,a){return{id:e.id,name:e.name,seconds:e.dt/1e3,authors:e.ar.map((function(e){return e.name})).join("\uff0c"),coverImgUrl:e.al.picUrl,canPlaying:(t=o[a],-1!==t.st&&-200!==t.st&&1!==t.fee&&4!==t.fee&&16!==t.fee),url:null};var t})),u=c.list.map((function(e){return Object(E.g)(e.id)})),e.next=18,Promise.all(u);case 18:d=e.sent,c.list.map((function(e,a){return e.url=d[a].data.data[0].url})),P(c);case 21:O(!1);case 22:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[C,P]);Object(l.useEffect)((function(){z(n)}),[n,z]);var L=Object(l.useCallback)((function(){var e=C.list.filter((function(e){return e.url}));I(e),a(Object(j.e)({data:e})),a(Object(j.b)({id:e.filter((function(e){return e.url}))[0].id,index:0,autoPlay:!1}))}),[C.list,a,I]),D=Object(l.useCallback)((function(){L(),a(Object(j.b)({id:C.list.filter((function(e){return e.url}))[0].id,index:0,autoPlay:!0}))}),[C.list,L,a]),w=Object(l.useCallback)((function(e){L();var t=C.list.findIndex((function(a){return a.id===e}));a(Object(j.b)({id:e,index:t,autoPlay:!0}))}),[C.list,L,a]);return s.a.createElement("div",{className:_.a.album},s.a.createElement("div",{className:_.a.head},s.a.createElement("div",{className:_.a.logo},s.a.createElement("img",{className:_.a.img,src:C.info.coverImgUrl,alt:""})),s.a.createElement("div",{className:_.a.main},s.a.createElement("div",{className:_.a.name},s.a.createElement(m.a,{color:"magenta"},"\u6b4c\u5355"),C.info.name),s.a.createElement("div",{className:_.a.nickname},"\u521b\u5efa\u8005\uff1a",C.info.nickname),s.a.createElement("div",{className:_.a.buttonGroup},s.a.createElement(o.a,{size:"small",icon:s.a.createElement(f.a,null),onClick:D},"\u64ad\u653e"),s.a.createElement(o.a,{size:"small",onClick:L},s.a.createElement(b.a,null))),s.a.createElement("div",{className:_.a.tags},"\u6807\u7b7e\uff1a",C.info.tags.map((function(e){return s.a.createElement(m.a,{key:e},e)}))),s.a.createElement("div",{className:_.a.descript},"\u4ecb\u7ecd\uff1a",C.info.description))),s.a.createElement("div",{className:_.a.listBox},s.a.createElement("div",{className:_.a.title},"\u6b4c\u66f2\u5217\u8868"),s.a.createElement(u.b,{size:"small",loading:x,dataSource:C.list,renderItem:function(e,a){return s.a.createElement(u.b.Item,{key:e.id},s.a.createElement("div",{className:_.a.item},s.a.createElement("div",{className:_.a.index},a+1),s.a.createElement("div",{className:_.a.main},s.a.createElement("div",{className:_.a.songName},e.name),s.a.createElement("div",{className:_.a.songCreator},e.authors)),s.a.createElement("div",{className:_.a.second},s.a.createElement(N.a,{seconds:e.seconds})),s.a.createElement("div",{className:_.a.canPlaying},e.url?s.a.createElement(o.a,{onClick:function(){return w(e.id)},type:"text",size:"small"},"\u64ad\u653e"):s.a.createElement(o.a,{type:"text",size:"small",disabled:!0},"\u65e0\u7248\u6743"))))}})),s.a.createElement(d.a,{visibilityHeight:600}))}}}]);
//# sourceMappingURL=7.0b4e56e2.chunk.js.map