(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[7],{264:function(e,a,t){e.exports={album:"_2hzivxDtZ7Lpvgv_X6pVe_",head:"_2G7dEGYEINlmoML5hs1NhP",logo:"_1XpWqywhwbUYPRNTj_2SwZ",img:"SjhxsrVLLEEskJ03LfpEl",main:"_1-lryxsU1rMvVjdxnaLMSB",name:"_1TgPIWbSRfEXB5K_PytIj-",nickname:"_1jILlatWTSWRHiqXAiGlp6",buttonGroup:"_2oNF_eCmWK3wXiMEX8ipq8",tags:"_2NXyU-l3NDvjYBWcqg7rAo",listBox:"_380ztTIKx73V2U9a6z6OTk",title:"_2R7Lx1geUI8ZuUW1MaR26i",item:"_1UK-h9FidD_9NTxhMCLDzD",index:"_3FrKiNJzzQaolrCA5-D_lD",songName:"_2b0O4qR1U949NuqZHG0rDW",songCreator:"_2Ekk2V7bfLi-WIEHRrawnv",second:"_3HGrHnDeHpZumNXgIB0ahX",canPlaying:"_3B08xlREDZ2TTBjaHLS8na",backTop:"_2N80j-B5i-D0JuOeH9zKy8"}},278:function(e,a,t){"use strict";t.r(a);var n=t(39),c=t.n(n),i=t(48),r=t(8),l=t(0),s=t.n(l),m=t(279),o=t(193),u=t(275),d=t(276),b=t(280),f=t(281),v=t(9),E=t(71),p=t(42);var g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=e.length,n=[];if(t<=a)return[e];for(var c=0;c<t;c+=a)n.push(e.slice(c,c+a));return n},N=t(58),j=t(17),k=t(264),_=t.n(k);a.default=function(){var e=Object(v.b)(),a=Object(p.d)(),t=Object(l.useState)(!0),n=Object(r.a)(t,2),k=n[0],x=n[1],O=Object(p.b)("cache-song-list",null)[1],h=Object(p.b)(a.query.id,{info:{albumId:"",name:"",nickname:"",coverImgUrl:"",tags:[],description:""},list:[]}),y=Object(r.a)(h,2),I=y[0],U=y[1],z=Object(l.useMemo)((function(){return I.list.filter((function(e){return e.url}))}),[I.list]),C=Object(l.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,i,r,l,s,m,o,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info.albumId){e.next=21;break}return e.next=3,Object(E.a)(a);case 3:return t=e.sent,n=t.data.playlist,i={info:{albumId:a,name:n.name,nickname:n.creator.nickname,coverImgUrl:n.coverImgUrl,description:n.description,tags:n.tags},list:[]},r=g(n.trackIds.map((function(e){return e.id}))).map((function(e){return e.join(",")})),l=r.map((function(e){return Object(E.e)(e)})),e.next=10,Promise.all(l);case 10:return s=e.sent,m=[],o=[],s.forEach((function(e){m=m.concat(e.data.songs),o=o.concat(e.data.privileges)})),i.list=m.map((function(e,a){return{id:e.id,name:e.name,seconds:e.dt/1e3,authors:e.ar.map((function(e){return e.name})).join("\uff0c"),coverImgUrl:e.al.picUrl,canPlaying:(t=o[a],-1!==t.st&&-200!==t.st&&1!==t.fee&&4!==t.fee&&16!==t.fee),url:null};var t})),u=i.list.map((function(e){return Object(E.g)(e.id)})),e.next=18,Promise.all(u);case 18:d=e.sent,i.list.map((function(e,a){return e.url=d[a].data.data[0].url})),U(i);case 21:x(!1);case 22:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[I,U]);Object(l.useEffect)((function(){C(a.query.id)}),[C,a.query.id]);var P=Object(l.useCallback)((function(){O(z),e(Object(j.e)({data:z})),e(Object(j.b)({id:z[0].id,index:0,autoPlay:!1}))}),[z,e,O]),D=Object(l.useCallback)((function(){P(),e(Object(j.b)({id:z[0].id,index:0,autoPlay:!0}))}),[P,e,z]),L=Object(l.useCallback)((function(a){P();var t=z.findIndex((function(e){return e.id===a}));e(Object(j.b)({id:a,index:t,autoPlay:!0}))}),[P,z,e]);return s.a.createElement("div",{className:_.a.album},s.a.createElement("div",{className:_.a.head},s.a.createElement("div",{className:_.a.logo},s.a.createElement("img",{className:_.a.img,src:I.info.coverImgUrl,alt:""})),s.a.createElement("div",{className:_.a.main},s.a.createElement("div",{className:_.a.name},s.a.createElement(m.a,{color:"magenta"},"\u6b4c\u5355"),I.info.name),s.a.createElement("div",{className:_.a.nickname},"\u521b\u5efa\u8005\uff1a",I.info.nickname),s.a.createElement("div",{className:_.a.buttonGroup},s.a.createElement(o.a,{size:"small",icon:s.a.createElement(b.a,null),onClick:D},"\u64ad\u653e"),s.a.createElement(o.a,{size:"small",onClick:P},s.a.createElement(f.a,null))),s.a.createElement("div",{className:_.a.tags},"\u6807\u7b7e\uff1a",I.info.tags.map((function(e){return s.a.createElement(m.a,{key:e},e)}))),s.a.createElement("div",{className:_.a.descript},"\u4ecb\u7ecd\uff1a",I.info.description))),s.a.createElement("div",{className:_.a.listBox},s.a.createElement("div",{className:_.a.title},"\u6b4c\u66f2\u5217\u8868"),s.a.createElement(u.b,{size:"small",loading:k,dataSource:I.list,renderItem:function(e,a){return s.a.createElement(u.b.Item,{key:e.id},s.a.createElement("div",{className:_.a.item},s.a.createElement("div",{className:_.a.index},a+1),s.a.createElement("div",{className:_.a.main},s.a.createElement("div",{className:_.a.songName},e.name),s.a.createElement("div",{className:_.a.songCreator},e.authors)),s.a.createElement("div",{className:_.a.second},s.a.createElement(N.a,{seconds:e.seconds})),s.a.createElement("div",{className:_.a.canPlaying},e.url?s.a.createElement(o.a,{onClick:function(){return L(e.id)},type:"text",size:"small"},"\u64ad\u653e"):s.a.createElement(o.a,{type:"text",size:"small",disabled:!0},"\u65e0\u7248\u6743"))))}})),s.a.createElement(d.a,{className:_.a.backTop,visibilityHeight:600}))}}}]);
//# sourceMappingURL=7.51cfcec1.chunk.js.map